if n, err = fd.Write(buf); err != nil { ... }